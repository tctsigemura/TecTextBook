\chapter{情報の表現}
この章では，コンピュータ内部でどのように情報が表現されているのか，
その情報をどのような回路で扱うことができるのか，簡単に紹介します．

%\pagebreak
\section{コンピュータ内部の情報表現}
人は，情報を音声や文字，絵等で表現することができます．
コンピュータも表面的には音声や文字，絵を扱うことができますが，
コンピュータの内部は電子回路で構成されているので，最終的には
電圧や電流で情報を表現せざるを得ません．

{\small\[ 情報の表現  =  \left(
 \begin{array}{l}
  人 : 音声，文字，絵，．．． \\
  コンピュータ : 電圧，電流 \\
 \end{array} \right)
\]}

\subsection{電気を用いた情報の表現}
電圧や電流で情報表現する方法には，いろいろなアイデアがあります．
しかし，現代のコンピュータは，電圧が「ある/ない」か，
電流が「流れている/流れていない」のような，
「ON/OFF」二つの状態だけを用いて情報を表現する方法を使っています．
二つの状態だけを考えれば良いので回路が作りやすいからです．

\figref{chap2:ookami1}を見て下さい．
電気の「ON/OFF」で「おおかみが来たか/来ていないか」の
どちらの状態なのかを伝達できる「情報の表示装置」を実現することができます．
電気の「ON/OFF」を用いて情報を表現することができました．

\myfigureN{tb}{width=\columnwidth}{Tikz/ookami.pdf}
          {おおかみが来た情報表示装置}{chap2:ookami1}

\subsection{ビット}

前の例では，ランプの「ON/OFF」を用いて「二つの状態のどちらなのか」を表し
ました．このような，「二つのどちらか」を表す情報が「情報の最小単位」
になります．情報の最小単位のことを「ビット（bit）」と呼びます．

\begin{center}
\fbox{\parbox{0.9\columnwidth}{\small
\emph{on/offのどちらか → 情報の最小単位（ビット）}}}
\end{center}

通常，ビットの値は「ON/OFF」ではなく，「1/0」で書きます．

{\small\[\left(\begin{array}{l c l}
ON  & : & 1 \\
OFF & : & 0
\end{array}\right)\]}

「おおかみが来た情報」は，
ビットの値に\tabref{chap2:ookami1}のように対応付けできます．

\begin{mytable}{tb}{おおかみが来た情報}{chap2:ookami1}
{\small\begin{tabular}{c|l} \hline\hline
ビット値 & \multicolumn{1}{c}{意　味} \\
\hline
0（off） & おおかみは来ていない \\
1（on）  & おおかみが来た！！！ \\
\end{tabular}}
\end{mytable}

\subsection{より複雑な情報の表現}

二つの状態では表現できない，
もっと複雑な情報はどうやって表現したら良いでしょうか．

前の例で，
やって来たおおかみの頭数により牧場の人が対応を変化させたい場合が考えられます．
そのためには「来たか/来なかったか」だけの情報では不十分です．
「たくさん来た」ことも知らせる必要があります．

より多くの状態を表現するために複数のビットを組み合わせます．
\tabref{chap2:ookami2}に
複数のビットの組み合わせて表現した「拡張おおかみが来た情報」を，
\figref{chap2:ookami2}に「拡張おおかみが来た情報表示装置」を示します．

\begin{mytable}{tb}{拡張おおかみが来た情報}{chap2:ookami2}
{\small\begin{tabular}{c|l} \hline\hline
ビット値 & \multicolumn{1}{c}{意　味}  \\
\hline
00 & おおかみはきていない（平気）      \\
01 & おおかみが1頭来た（戦う）         \\
10 & おおかみが2頭来た（？）           \\
11 & おおかみがたくさん来た（逃げる）  \\
\end{tabular}}
\end{mytable}

\myfigureN{tb}{width=\columnwidth}{Tikz/ookami2.pdf}
          {拡張おおかみが来た情報表示装置}{chap2:ookami2}

このように2ビット用いれば4種類の情報を表現することができます．
\tabref{chap2:bits}はビット数と表現できる組合せの関係を示したものです．
一般に，ｎビットを用いると$2^n$種類の情報を表現することができます．
システム内で必要なビット数を決めて，それの組合せに意味付けをすれば，
どんな情報だって表現できます．

\begin{mytable}{tb}{ビットの組合せの数}{chap2:bits}
{\small\begin{tabular}{c|l|l} \hline\hline
ビット数 & \multicolumn{1}{c|}{ビットの組合せ} & 組合せ数\\
\hline
1 & 0 1   & $2^1$ ($=2$) \\
2 & 00 01 10 11 & $2^2$ ($=4$) \\
3 & 000 001 010 011 &   \\
  & 100 101 110 111 & $2^3$ ($=8$) \\
...& ... &\\
n &  & $2^n$ \\
\end{tabular}}
\end{mytable}

ビットだけでは情報の単位として小さすぎるので，4ビットまとめたもの，
8ビットまとめたものにも名前があります．
「4ビット」を「1ニブル」，「8ビット」を「1バイト」と呼びます．

\subsubsection{問題}
\begin{enumerate}
\item 32ビットは何バイトになりますか？
\item 3バイトは何ビットになりますか？
\item 4ビットで何種類の情報を表現できますか？
\item 1バイトで何種類の情報を表現できますか？
\end{enumerate}

\newpage
\section{数値の表現}

ビットの組合せをどのように意味付けするかは，前節の例のように
「システムが扱う必要のある情報」により，毎回，約束すればよいのです．
しかし，どのコンピュータでも同じ方法で意味付けされている情報もあり
ます．それの一つが数値の表現方法です．

\subsection{2進数}

コンピュータの内部では，数値を2進数で表すのが普通です．
我々が普段使用している10進数と，2進数の特徴比較を次に示します．

%{\small
\begin{itemize}
\item 10進数の特徴
  \begin{enumerate}
  \item[(1)] 0 〜 9の10種類の数字を使用する．
  \item[(2)] 1桁毎に10倍の重みをもつ．
  \end{enumerate}
\item 2進数の特徴
  \begin{enumerate}
  \item[(1)] 0と1の2種類の数字を使用する．
  \item[(2)] 1桁毎に2倍の重みをもつ．
  \end{enumerate}
\end{itemize}
%}

コンピュータの内部では，ビットが情報の表現に使用されています．
そこで，ビット値の0/1をそのまま2進数の1桁と考えれば数値が表現できます．

例えば，4ビット用いると0 〜 15の数が\tabref{chap2:bin4}のように表現できます．
一般にnビットで$0~〜~2^n-1$の範囲の数を表現することができます．

\begin{mytable}{tb}{4ビットの２進数}{chap2:bin4}
{\small\begin{tabular}{c|c|c|c|r}
\hline\hline
$b_3$ & $b_2$ & $b_1$ & $b_0$ & 意味\\
\hline
 0 &  0 &  0 &  0 &  0 \\
 0 &  0 &  0 &  1 &  1 \\
 0 &  0 &  1 &  0 &  2 \\
 0 &  0 &  1 &  1 &  3 \\
 0 &  1 &  0 &  0 &  4 \\
 0 &  1 &  0 &  1 &  5 \\
 0 &  1 &  1 &  0 &  6 \\
 0 &  1 &  1 &  1 &  7 \\
 1 &  0 &  0 &  0 &  8 \\
 1 &  0 &  0 &  1 &  9 \\
 1 &  0 &  1 &  0 & 10 \\
 1 &  0 &  1 &  1 & 11 \\
 1 &  1 &  0 &  0 & 12 \\
 1 &  1 &  0 &  1 & 13 \\
 1 &  1 &  1 &  0 & 14 \\
 1 &  1 &  1 &  1 & 15 \\
\end{tabular}}
\end{mytable}

\subsection{基数変換}
進数を変換することを「基数変換」と呼びます．
ここでは2進数と10進数の間での基数変換を学びます．

%\tabref{chap2:bin4}に示した4ビットの範囲なら，
%2進数と10進数の対応を暗記することが可能です．
%しかし，8ビットの場合ならどうでしょう？
%組合せは256（$=2^8$）もあり暗記でません．
%対応を計算で求める必要があります．

\subsubsection{2進から10進への変換}

2進数の桁ごとの重みは，桁の番号をnとすると$2^n$になります．

{\small\[
\begin{array}{c c c c c }
b_3     & b_2     & b_1     & b_0     \\
2^3 = 8 & 2^2 = 4 & 2^1 = 2 & 2^0 = 1 \\
\end{array}
\]}

2進数の数値は，その桁の重みと桁の値を掛け合わせたものの合計です．
例えば2進数の$1010_2$は，$2^3$の桁が1，$2^2$の桁が0，
$2^1$の桁が1，$2^0$の桁が0ですから，
次のように計算できます．
{\small\begin{align*}
1010_2 &= 2^3 \times 1 + 2^2 \times 0 + 2^1 \times 1 + 2^0 \times 0 \\
       &= 8 \times 1 + 4 \times 0 + 2 \times 1 + 1 \times 0 \\
       &= 8 + 0 + 2 + 0 \\
       &= 10_{10}
\end{align*}}

\subsubsection{10進から2進への変換}

次に，10進数を2進数に変換する方法を考えます．
ここで着目するのは桁の移動です．

\figref{chap2:mod2}に例を示すように，
2進数を2で割ると右に1桁移動します．
その時の余りは最下位の桁からはみ出した数になります．
同じ値の10進数を2で割っても余りは同じです．

\begin{figure}[tb]
\begin{center}{\small
\begin{tabular}{l r l l }
          & $10_{10}$ & = & $1010_2$                       \\
$\div 2$↓ &                   &                            \\
          & $5_{10}^{\cdots 0}$  & = & $0101_2^{\cdots 0}$ \\
$\div 2$↓ &                    &                           \\
          & $2_{10}^{\cdots 1}$  & = & $0010_2^{\cdots 1}$ \\
$\div 2$↓ &                    &                           \\
          & $1_{10}^{\cdots 0}$  & = & $0001_2^{\cdots 0}$ \\
$\div 2$↓ &                    &                           \\
          & $0_{10}^{\cdots 1}$  & = & $0000_2^{\cdots 1}$ \\
\end{tabular}}
\caption{数値を２で割った時の余り}
\label{fig:chap2:mod2}
\end{center}
\end{figure}

つまり，数値を2で割った時の余りは2進数を右に
1桁移動したときはみ出してきた数を表しています．
そこで\figref{chap2:decToBin}のように，
2で割る操作を繰り返しながらはみ出して来た数を記録すれば，
もとの数を2進数で表したときの0/1の並びが分かります．

\begin{figure}[tb]
\begin{center}{\small
\begin{minipage}{0.5\columnwidth}
\begin{flushright}
\begin{tabular}{l}
$2 \underline{) ~~10 } $\\
$2 \underline{) ~~~5  } {\cdots 0}$ \\
$2 \underline{) ~~~2  } {\cdots 1}$ \\
$2 \underline{) ~~~1  } {\cdots 0}$ \\
$~~            ~~~~0    {\cdots 1}$
\end{tabular}
\end{flushright}
\end{minipage}
\begin{minipage}{0.4\columnwidth}
余りを右から順に並べると $1010_2$
\end{minipage}}
\caption{10を２進数に変換する例}
\label{fig:chap2:decToBin}
\end{center}
\end{figure}

\subsection{16進数}

2進数は，桁数が多くなり書き表すのに不便です．
そこで，\tabref{chap2:hex}のように2進数4桁をまとめて16進数一桁で書き表します．
9より大きな数字が無いので，16進数ではアルファベットを数字の代用にします．

何進数で書いてあるのかをはっきりさせるために，
\tabref{chap2:hex}のように数値の右に小さな字で何進数かを書き加えます．
ときには，数字の代わりに
%「2進数='b'」，
%「16進数='H'」
'H'を加えることもあります．
例えば，
%「$01100100_2$を$01100100_b$」，
「$64_{16}$を64H」のように書きます．

\begin{mytable}{tb}{2進数，16進数，10進数対応表}{chap2:hex}
{\small\begin{tabular}{ c | c | c }
\hline
\hline
\emph{2進数} & \emph{16進数} & \emph{10進数} \\
\hline
$0000_2$ & $0_{16}$ & $0_{10}$ \\
$0001_2$ & $1_{16}$ & $1_{10}$ \\
$0010_2$ & $2_{16}$ & $2_{10}$ \\
$0011_2$ & $3_{16}$ & $3_{10}$ \\
$0100_2$ & $4_{16}$ & $4_{10}$ \\
$0101_2$ & $5_{16}$ & $5_{10}$ \\
$0110_2$ & $6_{16}$ & $6_{10}$ \\
$0111_2$ & $7_{16}$ & $7_{10}$ \\
$1000_2$ & $8_{16}$ & $8_{10}$ \\
$1001_2$ & $9_{16}$ & $9_{10}$ \\
$1010_2$ & $A_{16}$ & $10_{10}$ \\
$1011_2$ & $B_{16}$ & $11_{10}$ \\
$1100_2$ & $C_{16}$ & $12_{10}$ \\
$1101_2$ & $D_{16}$ & $13_{10}$ \\
$1110_2$ & $E_{16}$ & $14_{10}$ \\
$1111_2$ & $F_{16}$ & $15_{10}$ \\
\end{tabular}}
\end{mytable}

%%\pagebreak
\begin{flushleft}
%\parbox{\columnwidth}{
\subsubsection{問題}
\begin{enumerate}
\item
%\tabref{chap2:hex}「2進数，16進数，10進数対応表」を暗記しなさい．
\tabref{chap2:hex}の内容を暗記しなさい．
\item
10進数の16，50，100，127，130を，2進数（8桁），
16進数（2桁）で書き表しなさい．
\item
2進数の 00011100，00111000，11100000を
16進数（2桁），10進数で書き表しなさい．
\item
16進数の 1F と AA を
2進数（8桁）で書き表しなさい．
また，10進数で書き表しなさい．
\end{enumerate}
%}
\end{flushleft}

\newpage
\section{負数の表現}
\label{minus}
拡張おおかみが来た情報表示装置では，
「表示装置の二つのランプ（２ビット）の読み方」を約束しました．
つぎに，数値の場合は，
「n個のビットを2進数として読む」ことを約束しました．

今度は，負の数が必要になりました．
そこで，ビットの新しい読み方を約束します．
この節で出てくるビットは「符号付き数値」を表しています．
以下では，「符号付き数値を表すビット」をどのように読むかを説明します．

\subsection{符号付き絶対値表現}
使用できるビットのうち一つを符号を表すために使用します．
これを「符号ビット」と呼ぶことにします．
通常，符号ビットには最上位（左端）のビットを使用します．

\tabref{chap2:signedInt}のように4ビット使用して，
$-7$ 〜 $+7$ の範囲を表すことができます．
この表現方法は分かりやすくて都合が良いのですが，
実際に使われることはあまりありません．

\begin{mytable}{tb}{符号付き絶対値表現（4ビット）}{chap2:signedInt}
{\small\begin{tabular}{ r | r || r | r }
\hline
\hline
負数 & 2進数    & 正数 & 2進数 \\
\hline
$-7$ & $1111_2$ & $+7$ & $0111_2$ \\
$-6$ & $1110_2$ & $+6$ & $0110_2$ \\
$-5$ & $1101_2$ & $+5$ & $0101_2$ \\
...  & ...      & ...  & ... \\
$-1$ & $1001_2$ & $+1$ & $0001_2$ \\
$-0$ & $1000_2$ & $+0$ & $0000_2$ \\
\end{tabular}}
\end{mytable}

\subsection{補数表現}
n桁のb進数において$b^n$からxを引いた数yをxに対する「bの補数」と言います．
n桁のb進数でにおいて$b^n-1$からxを引いた数zを
xに対する「(b-1)の補数」と言います．
{\small\begin{align*}
y&= b^n-x     &（yはxに対するbの補数） \\
z&= b^n-1-x   &（zはxに対する(b-1)の補数）
\end{align*}}
10進数の例を\figref{chap2:sc10}に，
2進数の例を\figref{chap2:sc2}に
示します．

\begin{figure}[tb]
\begin{center}
{\small\begin{tabular}{ l c r c l }
$b=10進数$    & ~ &       &   &              \\
$n=2桁$       & ~ & $100$ &   &              \\
$b^n = 100$   & ~ & $-25$ & ~ & 75は25に対す \\
\cline{3-3}
$x = 25$      &   &  $75$ &   & る10の補数   \\
              &   &       &   &        \\
$b=10進数$    & ~ &       &   &              \\
$n=2桁$       & ~ &  $99$ &   &              \\
$b^n-1 = 99$  & ~ & $-25$  & ~ & 74は25に対す \\
\cline{3-3}
$x = 25$      &   &  $74$ &   & る9の補数   \\
\end{tabular}}
\caption{2桁の10進数で補数の例}
\label{fig:chap2:sc10}
\end{center}
\end{figure}

\begin{figure}[tb]
\begin{center}
{\small\begin{tabular}{ l c r c l }
$b=2進数$       & ~ &          &   & $0110_2$は  \\ 
$n=4桁$         & ~ & $10000_2$ &   & $1010_2$に  \\
$b^n = 10000_2$ & ~ & $-1010_2$ & ~ & 対する      \\
\cline{3-3}
$x = 1010_2$    &   & $0110_2$  &   & \underline{2の補数} \\ 
                &   &           &   &            \\
$b=2進数$       & ~ &           &   & $0101_2$は \\
$n=4桁$         & ~ & $1111_2$  &   & $1010_2$に \\
$b^n-1 = 1111_2$& ~ & $-1010_2$  & ~ & 対する      \\
\cline{3-3}
$x = 1010_2$    &   & $0101_2$  &   & \underline{1の補数} \\
\end{tabular}}
\caption{4桁の2進数で補数の例}
\label{fig:chap2:sc2}
\end{center}
\end{figure}

\subsection{1の補数による負数の表現}

「\figref{chap2:sc2} ４桁の２進数で補数の例」にあるように，
$11...1_2$からもとの数(x)を引いた数をxに対する「1の補数」と呼びます．
\tabref{chap2:1sc}は$0$ 〜 $7$ に対する1の補数を計算したものです．

\begin{mytable}{tb}{4ビット2進数の1補数}{chap2:1sc}
{\small\begin{tabular}{ c | r c r}
\hline
\hline
もとの数 & \multicolumn{1}{|c}{補数へ変換} & & \multicolumn{1}{c}{補数} \\
\hline
$0$  & $1111_2 - 0000_2$ & $=$ & $1111_2$ \\
$1$  & $1111_2 - 0001_2$ & $=$ & $1110_2$ \\
$2$  & $1111_2 - 0010_2$ & $=$ & $1101_2$ \\
$3$  & $1111_2 - 0011_2$ & $=$ & $1100_2$ \\
$4$  & $1111_2 - 0100_2$ & $=$ & $1011_2$ \\
$5$  & $1111_2 - 0101_2$ & $=$ & $1010_2$ \\
$6$  & $1111_2 - 0110_2$ & $=$ & $1001_2$ \\
$7$  & $1111_2 - 0111_2$ & $=$ & $1000_2$ \\
\end{tabular}}
\end{mytable}

「$0001_2$に対する1の補数を$-0001_2$を表現するために使用する．」，
「$0010_2$に対する1の補数を$-0010_2$を表現するために使用する．」
つまり，「1の補数を負の数を表現するために使用する．」と約束すれば，
\figref{chap2:1sc}のように$-7$ 〜 $+7$の範囲の数を表現できます．
一般に，1の補数表現を用いたnビット符号付き2進数が表現できる数値の
範囲は次の式で計算できます．
{\small\begin{align*}
-(2^{n-1}-1) ~~ 〜 ~~ 2^{n-1}-1
\end{align*}}
\figref{chap2:1sc}で$+7$と$-7$が結んであるのは，
「互いに1の補数」であることを表すためです．
また，「互いに１の補数」の2数を見比べると
ビットの0/1が入れ替わった関係になっていることが分かります．
1の補数は引算だけではなく「ビット反転」でも計算できます．

\newcommand{\h}{$\vert$}
\begin{figure}[tb]
\begin{center}
{\small\tabcolsep=2mm\begin{tabular}{ r r c c c c c c c c }
$-7$  & $1000_2$ &--&--&--&--&--&--&--& +\\
$-6$  & $1001_2$ &--&--&--&--&--&--&+ &\h\\
$-5$  & $1010_2$ &--&--&--&--&--&+ &\h&\h\\
$-4$  & $1011_2$ &--&--&--&--&+ &\h&\h&\h\\
$-3$  & $1100_2$ &--&--&--&+ &\h&\h&\h&\h\\
$-2$  & $1101_2$ &--&--&+ &\h&\h&\h&\h&\h\\
$-1$  & $1110_2$ &--&+ &\h&\h&\h&\h&\h&\h\\
$-0$  & $1111_2$ &+ &\h&\h&\h&\h&\h&\h&\h\\
$+0$  & $0000_2$ &+ &\h&\h&\h&\h&\h&\h&\h\\
$+1$  & $0001_2$ &--&+ &\h&\h&\h&\h&\h&\h\\
$+2$  & $0010_2$ &--&--&+ &\h&\h&\h&\h&\h\\
$+3$  & $0011_2$ &--&--&--&+ &\h&\h&\h&\h\\
$+4$  & $0100_2$ &--&--&--&--&+ &\h&\h&\h\\
$+5$  & $0101_2$ &--&--&--&--&--&+ &\h&\h\\
$+6$  & $0110_2$ &--&--&--&--&--&--&+ &\h\\
$+7$  & $0111_2$ &--&--&--&--&--&--&--& +\\
\end{tabular}}
\caption{1の補数を用いた符号付き数値}
\label{fig:chap2:1sc}
\end{center}
\end{figure}

次に1の補数からもとの数を求める計算を考えてみましょう．
以下のように1の補数(z)を求める式を$x=$の形に変形しても同じ形になるので，
$x$と$z$は「互いに1の補数」です．
1の補数からもとの数を求める計算は，
もとの数から1の補数を求める計算と同じです．
（ビット反転のビット反転で元に戻る．）
{\small\begin{align*}
z &= 2^n - 1 - x &（zはxに対する1の補数） \\
x &= 2^n - 1 - z &（xはzに対する1の補数）
\end{align*}}
1の補数を使用した方法も，実際に使われることはあまりありません．
コンピュータの内部で実際に使用されるのは，
次に説明する2の補数による表現です．

\subsection{2の補数による負数の表現}\label{chap2:2c}

「\figref{chap2:sc2} ４桁の２進数で補数の例」にあるように，
$100...0_2$からもとの数(x)を引いた数をxに対する「2の補数」と呼びます．
\tabref{chap2:2sc}は$0$ 〜 $8$ に対する2の補数を計算したものです．
5ビットで表現されている部分もありますが，
四角で囲んだ4ビットに注目してください．

\begin{mytable}{tb}{4ビット2進数の2補数}{chap2:2sc}
{\small\begin{tabular}{ c | r c r}
\hline
\hline
もとの数 & \multicolumn{1}{|c}{補数へ変換} & & \multicolumn{1}{c}{補数} \\
\hline
$0$  & $1$\fbox{$0000$}$_2 - $\fbox{$0000$}$_2$ & $=$ & $1$\fbox{$0000$}$_2$ \\
$1$  & $1$\fbox{$0000$}$_2 - $\fbox{$0001$}$_2$ & $=$ & \fbox{$1111$}$_2$ \\
$2$  & $1$\fbox{$0000$}$_2 - $\fbox{$0010$}$_2$ & $=$ & \fbox{$1110$}$_2$ \\
$3$  & $1$\fbox{$0000$}$_2 - $\fbox{$0011$}$_2$ & $=$ & \fbox{$1101$}$_2$ \\
$4$  & $1$\fbox{$0000$}$_2 - $\fbox{$0100$}$_2$ & $=$ & \fbox{$1100$}$_2$ \\
$5$  & $1$\fbox{$0000$}$_2 - $\fbox{$0101$}$_2$ & $=$ & \fbox{$1011$}$_2$ \\
$6$  & $1$\fbox{$0000$}$_2 - $\fbox{$0110$}$_2$ & $=$ & \fbox{$1010$}$_2$ \\
$7$  & $1$\fbox{$0000$}$_2 - $\fbox{$0111$}$_2$ & $=$ & \fbox{$1001$}$_2$ \\
$8$  & $1$\fbox{$0000$}$_2 - $\fbox{$1000$}$_2$ & $=$ & \fbox{$1000$}$_2$ \\
\end{tabular}}
\end{mytable}

「$0001_2$に対する2の補数を$-0001_2$を表現するために使用する．」，
「$0010_2$に対する2の補数を$-0010_2$を表現するために使用する．」つまり
「2の補数を負の数を表すために使用する．」と約束すれば，
\figref{chap2:2sc}のように$-8$ 〜 $+7$の範囲の数を表現できます．
（ただし$1000_2$は$-8$を表現することとします．
4ビットでは$+8$を表現することはできません．）

一般に，2の補数表現を用いたnビット符号付き2進数が表現できる数値の
範囲は次の式で計算できます．
{\small\begin{align*}
-2^{n-1} ~~ 〜 ~~ 2^{n-1} -1
\end{align*}}

\begin{figure}[tb]
\begin{center}
{\small\tabcolsep=2mm\begin{tabular}{ r l c c c c c c c c }
$-8$  & $1000_2$ &  &  &  &  &  &  &  &  \\
$-7$  & $1001_2$ &--&--&--&--&--&--&--&+ \\
$-6$  & $1010_2$ &--&--&--&--&--&--&+ &\h\\
$-5$  & $1011_2$ &--&--&--&--&--&+ &\h&\h\\
$-4$  & $1100_2$ &--&--&--&--&+ &\h&\h&\h\\
$-3$  & $1101_2$ &--&--&--&+ &\h&\h&\h&\h\\
$-2$  & $1110_2$ &--&--&+ &\h&\h&\h&\h&\h\\
$-1$  & $1111_2$ &--&+ &\h&\h&\h&\h&\h&\h\\
$ 0$  & $0000_2$ &+ &\h&\h&\h&\h&\h&\h&\h\\
$ 1$  & $0001_2$ &--&+ &\h&\h&\h&\h&\h&\h\\
$ 2$  & $0010_2$ &--&--&+ &\h&\h&\h&\h&\h\\
$ 3$  & $0011_2$ &--&--&--&+ &\h&\h&\h&\h\\
$ 4$  & $0100_2$ &--&--&--&--&+ &\h&\h&\h\\
$ 5$  & $0101_2$ &--&--&--&--&--&+ &\h&\h\\
$ 6$  & $0110_2$ &--&--&--&--&--&--&+ &\h\\
$ 7$  & $0111_2$ &--&--&--&--&--&--&--&+ \\
\end{tabular}}
\caption{2の補数を用いた符号付き数値}
\label{fig:chap2:2sc}
\end{center}
\end{figure}

次に2の補数からもとの数を求める計算を考えてみましょう．
以下のように2の補数(z)を求める式を$x=$の形に変形しても同じ形になるので，
$x$と$z$は「互いに2の補数」です．
2の補数からもとの数を求める計算は，
もとの数から2の補数を求める計算と同じです．
{\small\begin{align*}
z &= 2^n - x &（zはxに対する2の補数） \\
x &= 2^n - z &（xはzに対する2の補数）
\end{align*}}
現代のコンピュータは，
ほとんどの機種で2の補数表現を採用しています．
2の補数表現を用いると2進数の足し算・引き算が，
正負のどちらの数でも同じ手順で計算できます（詳しくは後述）．
「手順が同じ＝演算回路が同じ」ことになりますので，
コンピュータを製作する上では非常に都合がよいのです．

\subsection{2の補数を求める手順}

$-x$ をnビット2の補数表現($y$)で表します．
2の補数の定義より，$y$は次のように計算できます．
{\small\begin{align*}
y &= 2^n - x             \\
  &= (2^n - 1 - x) + 1   \\
  &= (xに対する1の補数 ) + 1
\end{align*}}
「xに対する1の補数」はビット反転で簡単に求めることができます．
「xに対する2の補数」は「xをビット反転した後，1を加える」ことにより
簡単に求めることができます．

\begin{center}
\fbox{\small\emph{ビット反転した後，1を加える．}}
\end{center}

\subsection{2の補数から元の数を求める手順}
\label{hanten}

次に，逆変換について考えます．
既に\ref{chap2:2c}で触れたように2の補数と元の数は互いに「2の補数」ですから，
2の補数を求めるのと同じ計算で，2の補数から元の数を求めることができます．

\begin{center}
\fbox{\small\emph{ビット反転した後，1を加える．}}
\end{center}

\subsubsection{問題}
\begin{enumerate}
\item
次の数を「2の補数表現を用いた4ビット符号付き2進数」で書き表しなさい．\\
$3_{10}$，$-3_{10}$，$5_{10}$，$-5_{10}$，$6_{10}$，$-6_{10}$
\item
次の数を「2の補数表現を用いた8ビット符号付き2進数」で書き表しなさい．\\
$3_{10}$，$-3_{10}$，$8_{10}$，$-8_{10}$，\\
$30_{10}$，$-30_{10}$，$100_{10}$，$-100_{10}$
\item
次の「2の補数表現を用いた4ビット符号付き2進数」を10進数で書き表しなさい．\\
$1100_2$，$1011_2$，$0100_2$，$1101_2$
\end{enumerate}

\newpage
\section{2進数の計算}

ここでは，2進数の和と差の計算方法を学びます．

\subsection{正の数の計算}
2進数の計算も10進数と同じ要領です．
桁上がりが10ではなく，
2で発生することに注意してください．
\figref{chap2:cal2vs10}に例を示します．
2進数で計算しても10進数で計算しても同じ計算結果になります．

\begin{figure}[tbp]
\begin{center}
{\small\begin{tabular}{  l r l  l r l l}
\multicolumn{2}{c}{10進数}  & ~~~  & \multicolumn{2}{c}{2進数} & \\
                     & $07$ &      &     & $0111_2$ & （10進の7） \\
                 $+$ & $05$ &      & $+$ & $0101_2$ & （10進の5） \\
\cline{1-2} \cline{4-5}
                     & $12$ &      &     & $1100_2$ & （10進の12） \\
&&&&&&\\
                     & $12$ &      &     & $1100_2$ & （10進の12） \\
                 $-$ & $05$ &      & $-$ & $0101_2$ & （10進の5） \\
\cline{1-2} \cline{4-5}
                     & $07$ &      &     & $0111_2$ & （10進の7） \\
\end{tabular}\\
\vspace{0.2cm}
何進数で計算しても同じ結果になる．
}
\caption{2進数と10進数の計算を比較}
\label{fig:chap2:cal2vs10}
\end{center}
\end{figure}

\subsection{負の数を含む計算}

2の補数表現を用いると，正の数だけのときと同じ要領で負の数を
含む計算ができます．ここでは和の計算を例に説明します．

\subsubsection{正の数と負の数の和}
正の数($X$)と負の数($-A$)($A$の2の補数($B$))の和の計算を考えます．\\
$X + B$の計算($X + (-A)$)
\begin{enumerate}
\item 結果が負の場合($|A| > |X|$)\\
解は $-(A - X)$ になるはず！
{\small\begin{align}
X + B &= X + (2^n - A) \notag \\
      &= 2^n - (A - X) \label{eque}
\end{align}}
(\ref{eque})式は，正解$-(A - X)$の2の補数表現になっています．
\figref{chap2:addex1}に計算例を示します．

\begin{figure}[tbp]
\begin{center}
\parbox{0.9\columnwidth}{\small
$3+(-5)=-2$ （4ビット2の補数表現） \\
\begin{quote}
$3$を2進数に変換すると$0011_2$ \\
$-5$を2進数に変換すると$1011_2$ \\
\\
「和を計算する」 \\
$0011_2+1011_2=1110_2= -2_{10}$ \\
\end{quote}}
\caption{結果が負になる足し算の例}
\label{fig:chap2:addex1}
\end{center}
\end{figure}

\item 結果が正またはゼロの場合($|X| \geq |A|$)\\
解は $(X - A)$ になるはず！
{\small\begin{align}
X + B &= X + (2^n - A) \notag \\
      &= 2^n + (X - A) \label{equf} \\
      &= X - A         \notag
\end{align}}
(\ref{equf})式の$2^n$は，桁あふれにより結果に残らないので，
正解($X - A$)となります．
\figref{chap2:addex2}に計算例を示します．

\begin{figure}[tbp]
\begin{center}
\parbox{0.9\columnwidth}{\small
$5+(-3)=2$ (4ビット2の補数表現)\\
\begin{quote}
$5$を2進数に変換すると$0101_2$ \\
$-3$を2進数に変換すると$1101_2$ \\
\\
「和を計算する」 \\
$0101_2 + 1101_2 = \fbox{1}0010_2 =  2_{10}$ \\
（5ビット目の1は桁あふれで消滅）
\end{quote}}
\caption{結果が正になる足し算の例}
\label{fig:chap2:addex2}
\end{center}
\end{figure}
\end{enumerate}

\subsubsection{負の数と負の数の和}
負の数($-A_1$)(2の補数($B_1$))と\\
負の数($-A_2$)(2の補数($B_2$))の和\\
$B_1 + B_2$の計算($(-A_1) + (-A_2)$)\\
解は$-(A_1 + A_2)$になるはず！
{\small\begin{align}
B_1 + B_2 &= (2^n - A_1) + (2^n - A_2) \notag \\
          &= 2^n + (2^n - (A_1 + A_2)) \label{equc} \\
          &= 2^n - (A_1 + A_2)         \label{equd}
\end{align}}
(\ref{equc})式の最初の$2^n$は，桁あふれにより消滅するので
(\ref{equd})式は正解($-(A_1 + A_2)$)の2の補数表現になっています．
\figref{chap2:addex3}に計算例を示します．

\begin{figure}[tbp]
\begin{center}
\parbox{0.9\columnwidth}{\small
$(-1)+(-3)=(-4)$ （4ビット2の補数表現） \\
\begin{quote}
$-1$を2進数に変換すると$1111_2$ \\
$-3$を2進数に変換すると$1101_2$ \\
\\
「和を計算する」 \\
$1111_2 + 1101_2 = \fbox{1}1100_2 =  -4_{10}$ \\
（5ビット目の1は桁あふれで消滅） 
\end{quote}}
\caption{負の数と負の数の足し算の例}
\label{fig:chap2:addex3}
\end{center}
\end{figure}

以上のように，2の補数表現を使用すると負の数を含んだ足し算が簡単に
計算できます．ここでは省略しますが，引き算も同様に正負の区別をする
ことなく計算できます．

\begin{figure}[b]
\begin{framed}{\parindent=1em
\subsection*{MSBとLSB}
「2の補数表現を用いると，最上位ビットが1なら負の数と分かります．」
のように「最上位ビット」と言う言葉をよく使います．

「最上位ビット」と言うのは長いので，これを英語にした「Most Significant
Bit」の頭文字を取りMSBと略すことが良くあります．憶えておいて下さい．

同様に「最下位ビット」のことは英語で「Least Significant Bit」なので，
略してLSBと呼びます．これも，憶えておきましょう．
}\end{framed}
\end{figure}

\newpage
\subsubsection{問題}
次の2進数は「2の補数表現を用いた符号付き2進数」です．空欄を埋めなさい．

{\small\begin{center}
\tabcolsep=2mm\begin{tabular}{ l c r  c c r }
1) &   & $0011~1100_2$ &    &   & $\fbox{　　　}_{10}$ \\
   & + & $0010~1101_2$ & → & + & $\fbox{　　　}_{10}$ \\
\cline{2-3} \cline{5-6}
   &   & $\fbox{　　　　}_2$ & ~ &  & $\fbox{　　　}_{10}$
\end{tabular}
\end{center}}

{\small\begin{center}
\tabcolsep=2mm\begin{tabular}{ l c r  c c r }
2) &   & $0110~0100_2$ &    &   & $\fbox{　　　}_{10}$ \\
   & + & $1000~0001_2$ & → & + & $\fbox{　　　}_{10}$ \\
\cline{2-3} \cline{5-6}
   &   & $\fbox{　　　　}_2$ & ~ &  & $\fbox{　　　}_{10}$
\end{tabular}
\end{center}}

{\small\begin{center}
\tabcolsep=2mm\begin{tabular}{ l c r  c c r }
3) &   & $1110~0100_2$ &    &   & $\fbox{　　　}_{10}$ \\
   & + & $0100~0001_2$ & → & + & $\fbox{　　　}_{10}$ \\
\cline{2-3} \cline{5-6}
   &   & $\fbox{　　　　}_2$ & ~ &  & $\fbox{　　　}_{10}$
\end{tabular}
\end{center}}

{\small\begin{center}
\tabcolsep=2mm\begin{tabular}{ l c r  c c r }
4) &   & $1110~0100_2$ &    &   & $\fbox{　　　}_{10}$ \\
   & + & $1100~0001_2$ & → & + & $\fbox{　　　}_{10}$ \\
\cline{2-3} \cline{5-6}
   &   & $\fbox{　　　　}_2$ & ~ &  & $\fbox{　　　}_{10}$
\end{tabular}
\end{center}}

{\small\begin{center}
\tabcolsep=2mm\begin{tabular}{ l c r  c c r }
5) &     & $1110~0100_2$ &    &   & $\fbox{　　　}_{10}$ \\
   & $-$ & $1100~0001_2$ & → & $-$ & $\fbox{　　　}_{10}$ \\
\cline{2-3} \cline{5-6}
   &   & $\fbox{　　　　}_2$ & ~ &  & $\fbox{　　　}_{10}$
\end{tabular}
\end{center}}

\newpage
\section{小数の表現}

この節では，小数を2進数で表現する方法を紹介します．

\subsection{2進数による小数の表現}

コンピュータ内部で，2進数を用いて，
小数を含む数を表現する方法は何種類かあります．
ここでは，その中でも最も基本的な固定小数点形式を紹介します．

これまでの2進数は，暗黙のうちに小数点が右端にあると考えました．
小数点の位置を右端以外だと約束すれば，小数を含む数の表現も可能になります．
以下に4ビットの2桁目に小数点があると考えた場合の例を示します．

{\small
\begin{quote}
$00.00_2 = 0.0_{10}$  \\
$00.01_2 = 0.25_{10}$  \\
$00.10_2 = 0.5_{10}$  \\
$00.11_2 = 0.75_{10}$  \\
$01.00_2 = 1.0_{10}$  \\
$01.01_2 = 1.25_{10}$  \\
$01.10_2 = 1.5_{10}$  \\
$01.11_2 = 1.75_{10}$  \\
$10.00_2 = 2.0_{10}$  \\
...\\
$11.11_2 = 3.75_{10}$
\end{quote}
}

小数点を中心に，左は1桁毎に2倍，右は1桁毎に$1/2$倍になります．
（10進数では，左は1桁毎に10倍，右は1桁毎に$1/10$倍になりましたね．）

\subsection{10進数との相互変換}
\begin{enumerate}
\item
2進数から10進数への基数変換 \\
整数の場合と同様に桁の重みを加算すれば10進数に変換できます．
次に例を示します．

\begin{quote}
$10.01_2 = 2 + 1/4 = 2.25_{10}$
\end{quote}

\item
10進数から2進数への基数変換 \\
整数の場合は，$1/2$倍することで右にシフト（桁移動）し，小数点を横切った
$0/1$を判定しました．（小数点を$1$が横切ると，余りが出ていました．）

\figref{chap2:henkan}に例を示すように，
小数点以下の数値は，$2$倍することで左にシフトし，
小数点を横切った$0/1$を判定すれば2進数に変換できます．

\begin{figure}[tb]
\centerline{\parbox{0.8\columnwidth}{\small
\begin{center}
\begin{tabular}{ r l  l r}
\multicolumn{1}{c}{2進数} &  ~~~$\times 2$は~~~ & \multicolumn{2}{c}{10進数}\\
$0.101_2$ &        左シフ       &           & $0.625$ \\
\multicolumn{1}{c}{$\swarrow$} &   トと同じ     & $\times$  &     $2$ \\
\cline{3-4}
$1.010_2$      &                &           & $\underline{1}.250$ \\
&&&\\
\multicolumn{1}{c}{2進数} &  ~~~$\times 2$は~~~ & \multicolumn{2}{c}{10進数}\\
$0.010_2$ &        左シフ       &           & $0.250$ \\
\multicolumn{1}{c}{$\swarrow$} &   トと同じ     & $\times$  &     $2$ \\
\cline{3-4}
$0.100_2$      &                &           & $\underline{0}.500$ \\
&&&\\
\multicolumn{1}{c}{2進数} &  ~~~$\times 2$は~~~ & \multicolumn{2}{c}{10進数}\\
$0.100_2$ &        左シフ       &           & $0.500$ \\
\multicolumn{1}{c}{$\swarrow$} &   トと同じ     & $\times$  &     $2$ \\
\cline{3-4}
$1.000_2$      &                &           & $\underline{1}.000$ \\
\end{tabular}
\end{center}
10進数で計算したとき，小数点を横切って整数部に出てきた数を
小数点の右に順番に並べると $0.\underline{101}_2$ になる．}}
\caption{小数を表す10進数から2進数への変換例}
\label{fig:chap2:henkan}
\end{figure}

\item 整数部と小数部の両方がある場合 \\
整数部分と小数部分を分離して，別々に計算します．
\end{enumerate}

\newpage
\subsubsection{問題}
\begin{enumerate}
\item 次の2進数を10進数に変換しなさい．
\begin{enumerate}
\item $0.1001_2$
\item $0.0101_2$
\item $11.11_2$
\end{enumerate}

\item 次の10進数を2進数に変換しなさい．
\begin{enumerate}
\item $0.0625_{10}$
\item $0.1875_{10}$
\item $0.4375_{10}$
\end{enumerate}

\item 次の10進数を2進数に変換しなさい．（難問）
\begin{enumerate}
\item $0.8_{10}$
\item $0.7_{10}$
\end{enumerate}
\end{enumerate}

\newpage
\section{文字の表現}
\label{char}

この節では，文字を2進数で表現する方法を紹介します．
（文字情報を表しているビットの読み方を約束する．）

\subsection{文字コード}
文字の場合，数値のような規則性を期待することはできません．
そこで，使用する文字の一覧表を作成し，1文字毎に対応する2進数（コード）を
決めます．
この一覧表のことを「文字コード表」と呼びます．
文字コード表を各自（コンピュータメーカ等）が勝手に定義すると，
コンピュータの間でのデータ交換に不便です．
そこで，規格として制定してあります．

\subsection{ASCIIコード}
\label{ascii}
ASCII（American Standard Code for Information Interchange）コードは，
1963年にアメリカ規格協会（ANSI）が定めた情報交換用の文字コードです．
英字，数字，記号等が含まれます．
現代のパーソナルコンピュータ等で使用される文字コードは，ASCIIコードが
基本になっています．
\figref{chap2:ascii}にASCII文字コード表を示します．

\myfigureN{tbp}{scale=0.95}{Tikz/ascii.pdf}
          {ASCII文字コード表}{chap2:ascii}

文字コード表で 00H 〜 1FH と 7FH は，機能（改行等）を表す特殊な文字に
なっています．20H（SP）は空白を表す文字です．

ASCII文字コードは7ビットで表現されます．しかし，コンピュータの内部では
1バイト（8ビット）単位の方が扱いやすいので，最上位に$0_2$を補って8ビット
で扱うことがほとんどです．

\subsection{JIS文字コード}
日本では JIS（Japan Industrial Standard：日本工業規格）の一部として，
8ビットコード（英数記号＋カナ）と，16ビットコード
（英数記号＋カナ＋ひらがな＋カタカナ＋漢字．．．）が定められています．

JIS 8ビットコードは，ASCIIコードに半角カタカナを追加したものです．
記号，数字，英字の部分は，\.ほ\.ぼ，同じ並びになっています．

%\newpage
\section{補助単位}

長さや重さを書くとき，1,000m を 1km， 1,000g を 1kg のように書きました．
この k のような記号を補助単位と呼びます．

コンピュータの世界でよく使用される補助単位には，k（キロ=$10^3$），
M（メガ=$10^6$），G（ギガ=$10^9$），T（テラ=$10^{12}$）等があります．
（1,000倍毎に補助単位があります．）
パソコンのカタログに「CPUのクロックは 1GHz」のような記述を見かけますね．
よく使う補助単位を\tabref{chap2:hojyo}にまとめます．

記憶容量を表す場合の補助単位は，$1,000$の代わりに$2^{10} = 1,024$を使用します．
1,000 も 1,024 も k で表現すると紛らわしいので，
k の代わりに Ki と書き表すこともあります．
つまり，$1kB =1KiB = 2^{10}B = 1,024B$，
$1MB =1MiB = 2^{20}B = 1,048,576B$となります．（「B」はバイトを表す．）

「H.D.D.の容量は500GB」のように表示されている場合は，
記憶容量を表しているので$G = 2^{30}$で表示されています．
同じことを「H.D.D.の容量は500GiB」のように表示することもあります．

\begin{mytable}{tb}{補助単位まとめ}{chap2:hojyo}
{\small\begin{tabular}{r l l | r l l}\hline\hline
\multicolumn{3}{c|}{一般的に} &
\multicolumn{3}{c}{記憶容量} \\
\hline
\multicolumn{1}{c}{値} &
\multicolumn{1}{c}{記号} &
\multicolumn{1}{c|}{読み方} &
\multicolumn{1}{c}{値} &
\multicolumn{1}{c}{記号} &
\multicolumn{1}{c}{読み方} \\
\hline
$10^3$   & $k$ & キロ   & $2^{10}$ & $Ki$ & キビ \\
$10^6$   & $M$ & メガ   & $2^{20}$ & $Mi$ & メビ \\
$10^9$   & $G$ & ギガ   & $2^{30}$ & $Gi$ & ギビ \\
$10^{12}$& $T$ & テラ   & $2^{40}$ & $Ti$ & テビ \\
\end{tabular}}
\end{mytable}

\newpage
\section{コンピュータの基本回路}

前の節までで，コンピュータ内部での情報の表現方法を勉強しました．
コンピュータの内部では，どんな情報も電気の「ON/OFF」で表現しているのでしたね．

この節では，電気の「ON/OFF」を使用して，
計算や記憶をする回路を勉強します．

\subsection{論理演算と論理回路}
\label{logical}

論理（Yes/No，真/偽，True/False）を対象とする演算（計算）のことを
「論理演算」と呼びます．
論理の「真/偽」をビットの「1/0」に対応させることにより，
論理も電気の「ON/OFF」で表現することができます．

ここでは，論理演算と，論理演算をする回路を紹介します．
論理演算をする回路のことを「論理回路」と呼びます．
ここで紹介する論理回路が，
コンピュータを構成する基本回路になります．

\subsection{基本的な論理回路}
基本的な論理回路を4種類，
組合せてできたものを2種類，紹介します．

\subsubsection{論理積（AND）}
二つのビットを入力し，両方が1のときだけ出力が1になるような論理演算です．
\begin{center}
\myincludegraphics{Tikz/and.pdf}{scale=0.8}
\end{center}

\subsubsection{論理和（OR）}
二つのビットを入力し，どちらかが1のとき出力が1になるような論理演算です．
\begin{center}
\myincludegraphics{Tikz/or.pdf}{scale=0.8}
\end{center}

\subsubsection{否定（NOT）}
一つのビットを入力し，入力と逆の論理を出力する論理演算です．
\begin{center}
\myincludegraphics{Tikz/not.pdf}{scale=0.8}
\end{center}

\subsubsection{排他的論理和（XOR）}
二つのビットを入力し，二つが異なるとき出力が1になるような論理演算です．
\begin{center}
\myincludegraphics{Tikz/xor.pdf}{scale=0.8}
\end{center}

\subsubsection{NAND}
否定（NOT）と論理積（AND）を組み合わせた演算です．
\begin{center}
\myincludegraphics{Tikz/nand.pdf}{scale=0.8}
\end{center}

\subsubsection{NOR}
否定（NOT）と論理和（OR）を組み合わせた演算です．
\begin{center}
\myincludegraphics{Tikz/nor.pdf}{scale=0.8}
\end{center}

\subsection{演算回路}
「基本的な論理回路」を組み合わせることにより，
足し算／引き算等の複雑な演算を行う回路を実現できます．

\subsubsection{半加算器}
例えば，1ビットの足し算回路は\figref{chap2:ha}ように実現できます．
この例は A，Bの2ビットを入力し，
和（S）と上の桁への桁上がり（C）を出力する回路です．
この回路を「半加算器」と呼びます．

\myfigureN{tb}{scale=0.8}{Tikz/ha.pdf}{1ビット半加算器}{chap2:ha}

\subsubsection{全加算器}
半加算器は桁上がりを出力しますが，
自分自身は下の桁からの桁上がりを入力することができません．
桁上がりの入力を備えた1ビット足し算器を「全加算器」と呼び，
\figref{chap2:fa}のように実現することができます．

\myfigureN{tb}{scale=0.8}{Tikz/fa.pdf}
          {1ビット全加算器}{chap2:fa}

\subsubsection{nビット加算器}
\figref{chap2:adder}のように
半加算器と全加算器を組み合わせることで，
任意ビットの加算器を実現することができます．

\myfigureN{tb}{scale=0.8}{Tikz/adder.pdf}{４ビット加算器}{chap2:adder}

\subsubsection{nビット1の補数器}
1の補数を作る回路です．
1の補数はビット反転によってできるので，NOTでできます．
\figref{chap2:onesc}に4ビットの例を示します．
簡単ですね．

\myfigureN{tb}{scale=0.8}{Tikz/onesc.pdf}{4ビット1の補数器}{chap2:onesc}

\subsubsection{nビット2の補数器}
2の補数を作る回路です．
2の補数は，1の補数に1足すとできるので，
1の補数器の出力に半加算器を組み合わせるとできます．
\figref{chap2:twosc}に4ビットの例を示します．

\myfigureN{tb}{scale=0.8}{Tikz/twosc.pdf}{4ビット2の補数器}{chap2:twosc}

演算回路を数種類紹介しました．
ここでは紹介しませんでしたが，引き算回路等も同様に製作可能です．

\subsection{記憶回路}
「基本的な論理回路」を組み合わせることにより，
記憶機能を実現することもできます．
ここでは，最も簡単なRS-FF（RSフリップフロップ）を紹介します．

\figref{chap2:rsff}にRSフリップフロップの真理値表と回路図を示します．
RS-FFはS（Set）とR（Reset）の二つの入力と，状態$(Q, \bar Q)$の出力を
持つ回路です．
S=0，R=1を入力することにより，回路はリセットされ出力Qは0になります．
S=1，R=0を入力することにより，回路はセットされ出力Qは1になります．
\( \bar Q \)には，常にQの否定が出力されます．

S=0，R=0を入力すると，回路は直前の値を「記憶」します．
S=1，R=1は入力してはいけない組合せです．
RS-FFは，回路をリセット／セットした後で「記憶」状態にすることにより，
「値を記憶する回路（＝記憶回路）」として働きます．

\myfigureN{tb}{scale=0.8}{Tikz/rsff.pdf}{RSフリップフロップ}{chap2:rsff}

%\newpage
\section{まとめ}
この章では，
まず，ノイマン型コンピュータの内部では，情報が電気（電子）回路で扱い
扱いやすい2進数で表現されていること学びました．
次に，数値が2進数で表現できることや計算方法，
文字データの表現法を学びました．
最後に，コンピュータの基本回路である論理回路について学びました．

\begin{figure}[bt]
\begin{framed}{\parindent=1em
\subsection*{論理回路素子}
回路を製作するには，基本的な論理回路を内蔵した集積回路（論理IC）を用いる
ことができます．

様々な論理ICが販売されていますが，ここでは，74シリーズのものを紹介します．
下の例に示したのは，NANDゲートを四つ内蔵した7400と呼ばれるICです．
同様なICで，AND，OR，XOR，NOT等の回路を内蔵したものがあります．

このようなIC同士を配線して組み合わせることにより，
本文で紹介した演算回路や記憶回路を実現することができます．

\subsection*{論理IC}
\centerline{\myincludegraphics{Tikz/lic.pdf}{scale=0.6}}
}\end{framed}
\end{figure}

\begin{figure}[bt]
\begin{framed}{\parindent=1em
\subsection*{FPGA（field-programmable gate array）}
大量の論理回路素子を内蔵したLSI（Large Scale Integrated Circuit）の一種です．
半導体メーカが製造したFPGAは，
FPGAを利用する装置の設計者によって内部の回路をプログラムされ，
最終製品に組み込まれます．

TeCもFPGAを利用した製品の一つです．
\figref{chap4:kakubu}で「マイコン本体」と紹介されているLSIは，
Xilinx社のSpartan-6という名前のFPGAです．
これに，徳山高専で設計したTeCマイコンの回路をプログラムし
TeCとして動作させています．

TeC7が利用している Xilinx Spartan-6 FPGA （XC6LX9-2TQG144C）には，
74シリーズの論理IC換算で数万個分程度（かなり幅がありますが）の
回路をプログラムすることができます．
}\end{framed}
\end{figure}
\vfill
